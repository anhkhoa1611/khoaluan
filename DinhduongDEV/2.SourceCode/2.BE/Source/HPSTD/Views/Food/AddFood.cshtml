@model Food
@using HPSTD.Core.Entities;
@using HPSTD.Models;
@using HPSTD.Helpers;
@{
    bool xem = ViewBag.accessDetail != null ? ViewBag.accessDetail.xem : false;
    bool sua = ViewBag.accessDetail != null ? ViewBag.accessDetail.sua : false;
    bool them = ViewBag.accessDetail != null ? ViewBag.accessDetail.them : false;
    bool xoa = ViewBag.accessDetail != null ? ViewBag.accessDetail.xoa : false;
    bool xuat = ViewBag.accessDetail != null ? ViewBag.accessDetail.xuat : false;
    bool nhap = ViewBag.accessDetail != null ? ViewBag.accessDetail.nhap : false;

    ViewBag.Title = "Thông tin thực phẩm";

    var listActive = new List<SelectListItem>
{
new SelectListItem{Text = "Hoạt động", Value = "true"},
new SelectListItem{Text = "Ngưng hoạt động", Value = "false"},
};
    ViewBag.listActive = listActive;
    var newData = new Food();
}

<style>
    .k-grid-header th {
        text-align: center !important;
        /*font-weight: bold !important;*/
        overflow: visible !important;
        white-space: normal !important;
        vertical-align: middle !important;
        position: relative !important;
    }

        .k-grid-header th.k-header {
            vertical-align: middle !important;
            padding: 4px 0px 0px 0px;
        }

    .header-total {
        /*background-color: #C6EFCE;*/
        position: absolute;
        bottom: 0px;
        left: 0px;
        width: 100%;
        text-align: right;
    }

    .k-alt {
        /*background-color: #fff;*/
    }

    .k-link {
        color: #38556d !important;
    }

    .k-header {
        /*background-color: #B2EBF2 !important;*/
    }

    #popup-add-edit-projectinfo.modal, #popup-add-edit-projectmapinfo.modal {
        width: 80% !important;
        left: 10% !important;
        margin: 0;
        /*height: 80% !important;*/
    }

    #popup-add-edit-internalborrow.modal {
        width: 60% !important;
        left: 20% !important;
        margin: 0;
    }

    @@media(max-width: 991px) {
        #popup-add-edit-projectinfo.modal, #popup-add-edit-projectmapinfo.modal {
            width: 90% !important;
            left: 5% !important;
        }
    }

    #popup-add-edit-internalborrow.modal {
        width: 60% !important;
        left: 20% !important;
    }

    #popup-add-edit-estimatingexpected.modal {
        width: 80% !important;
        left: 10% !important;
        margin: 0;
    }

    #popup-add-edit-guarantee.modal {
        width: 80% !important;
        left: 10% !important;
        margin: 0;
    }

    #popup-add-edit-projectinfo.modal, #popup-add-edit-projectmapinfo.modal {
        width: 90% !important;
        left: 5% !important;
    }

    #popup-add-edit-contractproject.modal {
        width: 95% !important;
        left: 3% !important;
        margin: 0;
        /*height: 80% !important;*/
    }

    #popup_confirm_close {
        margin-top: 45px;
    }

    .k-dropdown-wrap {
        padding-top: 3px;
    }
    /*.k-input {
        height: 25px !important;
        padding-top: 3px;
    }*/

    .hr-number {
        color: #f10404;
        height: 20px;
        line-height: 20px;
        text-align: right;
        padding-right: 7px;
        font-weight: bold;
    }

    #grid tr td {
        overflow: visible;
    }

    table, th, td {
        border: 1px solid #d5d5d5;
        border-collapse: collapse;
    }

    label {
        font-weight: bold;
    }

    th, td {
        padding: 5px;
        text-align: left;
    }

    .input-number {
        text-align: right;
    }

    /*map*/
    #map {
        height: 350px;
        width: 100%;
    }

    .pac-container {
        z-index: 99999999;
    }

    .btn-collapse {
        width: 100%;
        text-align: left;
        border: none;
        padding: 5px;
        font-size: 16px;
        color: #fff;
        background: #147682;
        margin-top: 5px;
    }

    .k-dropdown-wrap {
        padding-top: 3px;
    }

    .k-upload-selected {
        display: none;
    }

    .input-append {
        width: calc(100% - 61px);
    }

    .add-on {
        text-shadow: none !important;
        cursor: pointer;
    }

    #popup_check_file {
        margin-top: 50px;
        width: 400px;
        margin-left: -200px;
        z-index: 99999999;
    }

    .k-dropdown {
        margin: 0 !important;
    }

    .chosen-container {
        width: 100% !important;
    }
</style>
<script src="@Url.Content("~/Scripts/jquery.blockUI.js")"></script>
@* BEGIN SCRIPT GENERATE INPUT TO CHOOSE FILE *@
@*<script type="text/template" id="ImageEmp">
    <input name="id" value="#=id>0?id:0#" class="hidden" />
    <img id="hinh_anh_emp" src="#=url_anh!=null?url_anh:''#" style="width:100%;height:350px" />
</script>*@
<div class="row-fluid widget-box">
    <form action=@Url.Action("CreateUpdate", "Food") id="createEditFrom" method="post" enctype="multipart/form-data" style="margin:0px">
        <div class="form-edit-add-projectinfo"></div>
        <div class="modal-footer">
            @*<button type="button" id="btn-submit" class="btn btn-info btn-small" onclick="save()">Lưu & Đóng</button>*@
            <button type="button" class="btn btn-info btn-small" onclick="saveAndClear()">Lưu</button>
            <button type="button" class="btn btn-danger btn-small" onclick="confirmClose()">Đóng</button>
        </div>
    </form>
</div>
<script type="text/template" id="EditTemplate">
    <div class="overflow-visible">
        <button data-toggle="collapse" type="button" data-target="\\#tt_congtrinh" class="btn-collapse">THÔNG TIN THỰC PHẦM</button>
        <div class="collapse in" id="tt_congtrinh">
        
            <div class="row-fluid widget-box">
                <div class="span6">
                    <div class="control-group">
                        <label>Ảnh đại diện</label>
                        <div class="controls" id="ava" style="width:240px; height:175px;">
                            <img id="myImg" src="/Images/No.jpg" style="width:100%;height:100%;" />
                        </div>
                        <div class="controls" style="padding-top: 5px; display:flex">
                            <label style="border-radius: 10px;padding: 5px 25px; margin-right:5px;" class="btn btn-white btn-info btn-sm">
                                Chọn ảnh
                                <input type="file" id="btnavatar" name="hinh_anh" onchange="readURL(this)" style="display:none">
                            </label>
                            <button style="border-radius: 10px;padding: 5px 25px;" type="button" id="" onclick="deleteimage()" class="btn btn-white btn-danger btn-sm">Xóa ảnh</button>
                        </div>
                    </div>
                    <div class="errorimage" style="display:none;">
                        <strong>Lỗi!</strong> Bạn vui lòng chọn file hình ảnh.
                    </div>
                </div>
                <div class="span6">
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Tên thực phẩm</label></div>
                        <div class="span3">
                            <input type="text" name="ten_thuc_pham" class="span12 form-control" placeholder="Tên thực phẩm" value="#=ten_thuc_pham!=null?ten_thuc_pham:''#" />
                        </div>
                        <div class="control-group span6">
                            <div class="span4"><label>Nhóm thực phẩm</label></div>
                            <div class="span8">
                                @(Html.Kendo().DropDownList()
                                                                                            .Name("ma_nhom_thuc_pham")
                                                                                            .DataTextField("ten_nhom_thuc_pham")
                                                                                            .DataValueField("ma_nhom_thuc_pham")
                                                                                            .HtmlAttributes(new { @class = "span12" })
                                                                                            .Filter("contains")
                                                                                            .OptionLabel("Chọn nhóm thực phẩm")
                                                                                            .Value("#=ma_nhom_thuc_pham !=null ? ma_nhom_thuc_pham: ''#")
                                                                                            .BindTo(ViewBag.Groupfood)
                                                                                            .ToClientTemplate()
                                )
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Nước</label></div>
                        <div class="span3">
                            <input type="text" name="nuoc" class="span12 form-control" placeholder="Hàm lượng ... (g)" value="#=nuoc!=null?nuoc:''#" />
                        </div>
                        <div class="span3"><label>Năng lượng</label></div>
                        <div class="span3">
                            <input type="text" name="nang_luong" class="span12 form-control" placeholder="Năng lượng ... (KCal)" value="#=nang_luong!=null?nang_luong:''#" />
                        </div>
                    </div>
                  
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Protein (đạm)</label></div>
                        <div class="span3">
                            <input type="text" name="protein" class="span12 form-control" placeholder="Protein ... (g)" value="#=protein!=null?protein:''#" />
                        </div>
                        <div class="span3"><label>Lipid (béo)</label></div>
                        <div class="span3">
                            <input type="text" name="lipid" class="span12 form-control" placeholder="Lipid ... (g)" value="#=lipid!=null?lipid:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Glucid (Carbohydrate)</label></div>
                        <div class="span3">
                            <input type="text" name="glucid" class="span12 form-control" placeholder="Glucid ... (g)" value="#=glucid!=null?glucid:''#" />
                        </div>
                        <div class="span3"><label>Celluloza (Xơ)</label></div>
                        <div class="span3">
                            <input type="text" name="celluloza" class="span12 form-control" placeholder="Celluloza ... (g)" value="#=celluloza!=null?celluloza:''#" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid widget-box">
                <div class="span6">
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Đường tổng số</label></div>
                        <div class="span3">
                            <input type="text" name="duong_tong_so" class="span12 form-control" placeholder="Đường tổng số ... (g)" value="#=duong_tong_so!=null?duong_tong_so:''#" />
                        </div>
                        <div class="span3"><label>Vitamin C</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminc" class="span12 form-control" placeholder="Vitamin C ... (mg)" value="#=vitaminc!=null?vitaminc:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Galactoza</label></div>
                        <div class="span3">
                            <input type="text" name="galactoza" class="span12 form-control" placeholder="Galactoza ... (g)" value="#=galactoza!=null?galactoza:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B1</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb1" class="span12 form-control" placeholder="Vitamin B1 ... (mg)" value="#=vitaminb1!=null?vitaminb1:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Maltoza</label></div>
                        <div class="span3">
                            <input type="text" name="maltoza" class="span12 form-control" placeholder="Maltoza ... (g)" value="#=maltoza!=null?maltoza:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B2</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb2" class="span12 form-control" placeholder="Vitamin B2 ... (mg)" value="#=vitaminb2!=null?vitaminb2:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Lactoza</label></div>
                        <div class="span3">
                            <input type="text" name="lactoza" class="span12 form-control" placeholder="Lactoza ... (g)" value="#=lactoza!=null?lactoza:''#" />
                        </div>
                        <div class="span3"><label>Vitamin PP</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminpp" class="span12 form-control" placeholder="Vitamin PP ... (mg)" value="#=vitaminpp!=null?vitaminpp:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Fructoza</label></div>
                        <div class="span3">
                            <input type="text" name="fructoza" class="span12 form-control" placeholder="Fructoza ... (g)" value="#=fructoza!=null?fructoza:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B5</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb5" class="span12 form-control" placeholder="Vitamin B5 ... (mg)" value="#=vitaminb5!=null?vitaminb5:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Glucoza</label></div>
                        <div class="span3">
                            <input type="text" name="glucoza" class="span12 form-control" placeholder="Glucoza ... (g)" value="#=glucoza!=null?glucoza:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B6</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb6" class="span12 form-control" placeholder="Vitamin B6 ... (mg)" value="#=vitaminb6!=null?vitaminb6:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Calci</label></div>
                        <div class="span3">
                            <input type="text" name="calci" class="span12 form-control" placeholder="Calci ... (mg)" value="#=calci!=null?calci:''#" />
                        </div>
                        <div class="span3"><label>Folat</label></div>
                        <div class="span3">
                            <input type="text" name="folat" class="span12 form-control" placeholder="Folat ... (μg)" value="#=folat!=null?folat:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Sắt</label></div>
                        <div class="span3">
                            <input type="text" name="sat" class="span12 form-control" placeholder="Sắt ... (mg)" value="#=sat!=null?sat:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B9 </label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb9" class="span12 form-control" placeholder="Vitamin B9  ... (μg)" value="#=vitaminb9!=null?vitaminb9:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Magiê</label></div>
                        <div class="span3">
                            <input type="text" name="magie" class="span12 form-control" placeholder="Magiê ... (mg)" value="#=magie!=null?magie:''#" />
                        </div>
                        <div class="span3"><label>Vitamin H</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb9" class="span12 form-control" placeholder="Vitamin B9  ... (μg)" value="#=vitaminb9!=null?vitaminb9:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Mangan</label></div>
                        <div class="span3">
                            <input type="text" name="mangan" class="span12 form-control" placeholder="Mangan ... (mg)" value="#=mangan!=null?mangan:''#" />
                        </div>
                        <div class="span3"><label>Vitamin B12</label></div>
                        <div class="span3">
                            <input type="text" name="vitaminb12" class="span12 form-control" placeholder="Vitamin B12  ... (μg)" value="#=vitaminb12!=null?vitaminb12:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Phospho</label></div>
                        <div class="span3">
                            <input type="text" name="phospho" class="span12 form-control" placeholder="Phospho ... (mg)" value="#=phospho!=null?phospho:''#" />
                        </div>
                        <div class="span3"><label>Vitamin A</label></div>
                        <div class="span3">
                            <input type="text" name="vitamina" class="span12 form-control" placeholder="Vitamin A  ... (μg)" value="#=vitamina!=null?vitamina:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Kali</label></div>
                        <div class="span3">
                            <input type="text" name="kali" class="span12 form-control" placeholder="Kali ... (mg)" value="#=kali!=null?kali:''#" />
                        </div>
                        <div class="span3"><label>Vitamin D</label></div>
                        <div class="span3">
                            <input type="text" name="vitamind" class="span12 form-control" placeholder="Vitamin D  ... (μg)" value="#=vitamind!=null?vitamind:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Natri</label></div>
                        <div class="span3">
                            <input type="text" name="natri" class="span12 form-control" placeholder="Natri ... (mg)" value="#=natri!=null?natri:''#" />
                        </div>
                        <div class="span3"><label>Vitamin D</label></div>
                        <div class="span3">
                            <input type="text" name="vitamind" class="span12 form-control" placeholder="Vitamin D  ... (μg)" value="#=vitamind!=null?vitamind:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Kẽm</label></div>
                        <div class="span3">
                            <input type="text" name="kem" class="span12 form-control" placeholder="Kẽm ... (mg)" value="#=kem!=null?kem:''#" />
                        </div>
                        <div class="span3"><label>Vitamin E</label></div>
                        <div class="span3">
                            <input type="text" name="vitamine" class="span12 form-control" placeholder="Vitamin E  ... (mg)" value="#=vitamine!=null?vitamine:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Đồng</label></div>
                        <div class="span3">
                            <input type="text" name="dong" class="span12 form-control" placeholder="Đồng ... (μg)" value="#=dong!=null?dong:''#" />
                        </div>
                        <div class="span3"><label>Vitamin K</label></div>
                        <div class="span3">
                            <input type="text" name="vitamink" class="span12 form-control" placeholder="Vitamin K  ... (μg)" value="#=vitamink!=null?vitamink:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Selen</label></div>
                        <div class="span3">
                            <input type="text" name="selen" class="span12 form-control" placeholder="Selen ... (μg)" value="#=selen!=null?selen:''#" />
                        </div>
                        <div class="span3"><label>Beta-caroten</label></div>
                        <div class="span3">
                            <input type="text" name="beta_caroten" class="span12 form-control" placeholder="Beta-caroten ... (μg)" value="#=beta_caroten!=null?beta_caroten:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Alpha-caroten</label></div>
                        <div class="span3">
                            <input type="text" name="alpha_caroten" class="span12 form-control" placeholder="Alpha-caroten ... (μg)" value="#=alpha_caroten!=null?alpha_caroten:''#" />
                        </div>
                        <div class="span3"><label>Beta-cryptoxanthin</label></div>
                        <div class="span3">
                            <input type="text" name="beta_cryptoxanthin" class="span12 form-control" placeholder="Beta-cryptoxanthin ... (μg)" value="#=beta_cryptoxanthin!=null?beta_cryptoxanthin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Lycopen</label></div>
                        <div class="span3">
                            <input type="text" name="lycopen" class="span12 form-control" placeholder="Lycopen ... (μg)" value="#=lycopen!=null?lycopen:''#" />
                        </div>
                        <div class="span3"><label>Lutein + Zeaxanthin</label></div>
                        <div class="span3">
                            <input type="text" name="lutein_zeaxanthin" class="span12 form-control" placeholder="Lycopen ... (μg)" value="#=lutein_zeaxanthin!=null?lutein_zeaxanthin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Tổng số isoflavon</label></div>
                        <div class="span3">
                            <input type="text" name="tong_so_isoflavon" class="span12 form-control" placeholder="Tổng số isoflavon ... (mg)" value="#=tong_so_isoflavon!=null?tong_so_isoflavon:''#" />
                        </div>
                        <div class="span3"><label>Purin</label></div>
                        <div class="span3">
                            <input type="text" name="purin" class="span12 form-control" placeholder="Purin ... (mg)" value="#=purin!=null?purin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Daidzein</label></div>
                        <div class="span3">
                            <input type="text" name="daidzein" class="span12 form-control" placeholder="Daidzein ... (mg)" value="#=daidzein!=null?daidzein:''#" />
                        </div>
                        <div class="span3"><label>Genistein</label></div>
                        <div class="span3">
                            <input type="text" name="genistein" class="span12 form-control" placeholder="Genistein ... (mg)" value="#=genistein!=null?genistein:''#" />
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Tổng số acid béo no</label></div>
                        <div class="span3">
                            <input type="text" name="tong_so_acid_beo_no" class="span12 form-control" placeholder="Tổng số acid béo no ... (g)" value="#=tong_so_acid_beo_no!=null?tong_so_acid_beo_no:''#" />
                        </div>
                        <div class="span3"><label>Arachidonic (C20:4)</label></div>
                        <div class="span3">
                            <input type="text" name="arachidonic_c20" class="span12 form-control" placeholder="Arachidonic (C20:4) ... (g)" value="#=arachidonic_c20!=null?arachidonic_c20:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Palmitic (C16:0)</label></div>
                        <div class="span3">
                            <input type="text" name="palmitic_c16" class="span12 form-control" placeholder="Palmitic (C16:0) ... (g)" value="#=palmitic_c16!=null?palmitic_c16:''#" />
                        </div>
                        <div class="span3"><label>Eicosapentaenoic (C20:5 n3)</label></div>
                        <div class="span3">
                            <input type="text" name="eicosapentaenoic_c20" class="span12 form-control" placeholder="Eicosapentaenoic (C20:5 n3) ... (g)" value="#=eicosapentaenoic_c20!=null?eicosapentaenoic_c20:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Margaric (C17:0)</label></div>
                        <div class="span3">
                            <input type="text" name="margaric_c17" class="span12 form-control" placeholder="Margaric (C17:0) ... (g)" value="#=margaric_c17!=null?margaric_c17:''#" />
                        </div>
                        <div class="span3"><label>Docosahexaenoic (C22:6 n3)</label></div>
                        <div class="span3">
                            <input type="text" name="docosahexaenoic_c22" class="span12 form-control" placeholder="Docosahexaenoic (C22:6 n3) ... (g)" value="#=docosahexaenoic_c22!=null?docosahexaenoic_c22:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Stearic (C18:0)</label></div>
                        <div class="span3">
                            <input type="text" name="stearic_c18" class="span12 form-control" placeholder="Stearic (C18:0) ... (g)" value="#=stearic_c18!=null?stearic_c18:''#" />
                        </div>
                        <div class="span3"><label>TS acid béo trans</label></div>
                        <div class="span3">
                            <input type="text" name="tong_so_acid_beo_trans" class="span12 form-control" placeholder="TS acid béo trans ... (g)" value="#=tong_so_acid_beo_trans!=null?tong_so_acid_beo_trans:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Arachidic (C20:0)</label></div>
                        <div class="span3">
                            <input type="text" name="arachidic_c20" class="span12 form-control" placeholder="Arachidic (C20:0) ... (g)" value="#=arachidic_c20!=null?arachidic_c20:''#" />
                        </div>
                        <div class="span3"><label>Cholesterol</label></div>
                        <div class="span3">
                            <input type="text" name="cholesterol" class="span12 form-control" placeholder="Cholesterol ... (mg)" value="#=cholesterol!=null?cholesterol:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Behenic (22:0)</label></div>
                        <div class="span3">
                            <input type="text" name="behenic_c22" class="span12 form-control" placeholder="Behenic (22:0) ... (g)" value="#=behenic_c22!=null?behenic_c22:''#" />
                        </div>
                        <div class="span3"><label>Phytosterol</label></div>
                        <div class="span3">
                            <input type="text" name="phytosterol" class="span12 form-control" placeholder="Phytosterol ... (mg)" value="#=phytosterol!=null?phytosterol:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Lignoceric (C24:0)</label></div>
                        <div class="span3">
                            <input type="text" name="lignoceric_c24" class="span12 form-control" placeholder="Lignoceric (C24:0) ... (g)" value="#=lignoceric_c24!=null?lignoceric_c24:''#" />
                        </div>
                        <div class="span3"><label>Lysin</label></div>
                        <div class="span3">
                            <input type="text" name="lysin" class="span12 form-control" placeholder="Lysin ... (mg)" value="#=lysin!=null?lysin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>TS acid béo không no 1 nối đôi</label></div>
                        <div class="span3">
                            <input type="text" name="tong_so_acid_beo_khong_no_mot_noi_doi" class="span12 form-control" placeholder="TS acid béo không no 1 nối đôi ... (g)" value="#=tong_so_acid_beo_khong_no_mot_noi_doi!=null?tong_so_acid_beo_khong_no_mot_noi_doi:''#" />
                        </div>
                        <div class="span3"><label>Methionin</label></div>
                        <div class="span3">
                            <input type="text" name="methionin" class="span12 form-control" placeholder="Methionin ... (mg)" value="#=methionin!=null?methionin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Myristoleic (C14:1)</label></div>
                        <div class="span3">
                            <input type="text" name="myrictoleic_c14" class="span12 form-control" placeholder="Myristoleic (C14:1) ... (g)" value="#=myrictoleic_c14!=null?myrictoleic_c14:''#" />
                        </div>
                        <div class="span3"><label>Tryptophan</label></div>
                        <div class="span3">
                            <input type="text" name="tryptophan" class="span12 form-control" placeholder="Tryptophan ... (mg)" value="#=tryptophan!=null?tryptophan:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Palmitoleic (C16:1)</label></div>
                        <div class="span3">
                            <input type="text" name="palmitoleic_c16" class="span12 form-control" placeholder="Palmitoleic (C16:1) ... (g)" value="#=palmitoleic_c16!=null?palmitoleic_c16:''#" />
                        </div>
                        <div class="span3"><label>Phenylalanin</label></div>
                        <div class="span3">
                            <input type="text" name="phenylalanin" class="span12 form-control" placeholder="Phenylalanin ... (mg)" value="#=phenylalanin!=null?phenylalanin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Oleic (C18:1)</label></div>
                        <div class="span3">
                            <input type="text" name="oleic_c18" class="span12 form-control" placeholder="Oleic (C18:1) ... (g)" value="#=oleic_c18!=null?oleic_c18:''#" />
                        </div>
                        <div class="span3"><label>Phenylalanin</label></div>
                        <div class="span3">
                            <input type="text" name="phenylalanin" class="span12 form-control" placeholder="Phenylalanin ... (mg)" value="#=phenylalanin!=null?phenylalanin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>TS acid béo không no nhiều nối đôi</label></div>
                        <div class="span3">
                            <input type="text" name="tong_so_acid_beo_khong_no_nhieu_noi_doi" class="span12 form-control" placeholder="TS acid béo không no nhiều nối đôi ... (g)" value="#=tong_so_acid_beo_khong_no_nhieu_noi_doi!=null?tong_so_acid_beo_khong_no_nhieu_noi_doi:''#" />
                        </div>
                        <div class="span3"><label>Threonin</label></div>
                        <div class="span3">
                            <input type="text" name="threonin" class="span12 form-control" placeholder="Threonin ... (mg)" value="#=threonin!=null?threonin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Linoleic (C18:2 n6)</label></div>
                        <div class="span3">
                            <input type="text" name="linoleic_c18" class="span12 form-control" placeholder="Linoleic (C18:2 n6) ... (g)" value="#=linoleic_c18!=null?linoleic_c18:''#" />
                        </div>
                        <div class="span3"><label>Valin</label></div>
                        <div class="span3">
                            <input type="text" name="valin" class="span12 form-control" placeholder="Valin ... (mg)" value="#=valin!=null?valin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Linolenic (C18:2 n3)</label></div>
                        <div class="span3">
                            <input type="text" name="linoleic_c18_n3" class="span12 form-control" placeholder="Linolenic (C18:2 n3) ... (g)" value="#=linoleic_c18_n3!=null?linoleic_c18_n3:''#" />
                        </div>
                        <div class="span3"><label>Leucin</label></div>
                        <div class="span3">
                            <input type="text" name="leucin" class="span12 form-control" placeholder="Leucin ... (mg)" value="#=leucin!=null?leucin:''#" />
                        </div>
                    </div>
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Isoleucin</label></div>
                        <div class="span3">
                            <input type="text" name="isoleucin" class="span12 form-control" placeholder="Isoleucin ... (mg)" value="#=isoleucin!=null?isoleucin:''#" />
                        </div>
                        <div class="span3"><label>Arginin</label></div>
                        <div class="span3">
                            <input type="text" name="arginin" class="span12 form-control" placeholder="Arginin ... (mg)" value="#=arginin!=null?arginin:''#" />
                        </div>
                    </div>
                 
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Histidin</label></div>
                        <div class="span3">
                            <input type="text" name="histidin" class="span12 form-control" placeholder="Histidin ... (mg)" value="#=histidin!=null?histidin:''#" />
                        </div>
                        <div class="span3"><label>Cystin</label></div>
                        <div class="span3">
                            <input type="text" name="cystin" class="span12 form-control" placeholder="Cystin ... (mg)" value="#=cystin!=null?cystin:''#" />
                        </div>
                    </div>
                
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Tyrosin</label></div>
                        <div class="span3">
                            <input type="text" name="tyrosin" class="span12 form-control" placeholder="Tyrosin ... (mg)" value="#=tyrosin!=null?tyrosin:''#" />
                        </div>
                        <div class="span3"><label>Alanin</label></div>
                        <div class="span3">
                            <input type="text" name="alanin" class="span12 form-control" placeholder="Alanin ... (mg)" value="#=alanin!=null?alanin:''#" />
                        </div>
                    </div>
              
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Acid aspartic</label></div>
                        <div class="span3">
                            <input type="text" name="acid_aspartic" class="span12 form-control" placeholder="Acid aspartic ... (mg)" value="#=acid_aspartic!=null?acid_aspartic:''#" />
                        </div>
                        <div class="span3"><label>Acid glutamic</label></div>
                        <div class="span3">
                            <input type="text" name="acid_glutamic" class="span12 form-control" placeholder="Acid glutamic ... (mg)" value="#=acid_glutamic!=null?acid_glutamic:''#" />
                        </div>
                    </div>
               
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Glycin</label></div>
                        <div class="span3">
                            <input type="text" name="glycin" class="span12 form-control" placeholder="Glycin ... (mg)" value="#=glycin!=null?glycin:''#" />
                        </div>
                        <div class="span3"><label>Prolin</label></div>
                        <div class="span3">
                            <input type="text" name="prolin" class="span12 form-control" placeholder="Prolin ... (mg)" value="#=prolin!=null?prolin:''#" />
                        </div>
                    </div>
                  
                    <div class="row-fluid widget-box">
                        <div class="span3"><label>Serin</label></div>
                        <div class="span3">
                            <input type="text" name="serin" class="span12 form-control" placeholder="Serin ... (mg)" value="#=serin!=null?serin:''#" />
                        </div>
                    </div>
                </div>
            </div>
         
        </div>
    </div>
</script>
<script>
    $(document).ready(function () {
        var data = @Html.Raw(Json.Encode(Model));
        if (data != null) {
            loadForm(data);
        } else {
            loadForm(JSON.parse('@Html.Raw(Json.Encode(newData))'));
        }
        $('#FileUpload').change(function () {
            readURL($(this));
        })
    });

    function loadForm(data) {

        var EditTemplate = kendo.template($("#EditTemplate").html());
        if (data.hinh_anh != null) {
            $('#myImg').attr('src', data.hinh_anh);
        }
        $(".form-edit-add-projectinfo").html(EditTemplate(data));
        Validate(data);
    }
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                var data = reader.result;
                if (data.match(/^data:image\//)) {
                    $('#myImg').attr('src', e.target.result);
                } else {
                    $(".errorimage").css("display", "block");
                }
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
    function deleteimage() {
        $('#btnavatar').val("");
        $('#myImg').attr('src', "Images/No.jpg");
    }

    function Validate() {
        $.validator.setDefaults({ ignore: ":hidden:not(select)" })

        $("#createEditFrom").validate({
            //rules: {
            //    'ten_nhan_vien': { required: true },
            //    'so_cmnd': { required: true },
            //    'email': { required: true, email: true },
            //},
            //messages: {
            //    'ten_nhan_vien': { required: "Thông tin bắt buộc" },
            //    'so_cmnd': { required: "Thông tin bắt buộc" },
            //    'email': { required: "Thông tin bắt buộc" },
            //},
            errorPlacement: function (error, element) {
            },
            submitHandler: function (form) {
                $(form).ajaxSubmit({
                    clearForm: false,
                    success: function (data) {
                        blockUI(false);
                        if (data.success) {
                            $.gritter.add({
                                title: '',
                                text: "Lưu thông tin thực phẩm thành công",
                                class_name: 'gritter-success'
                            });
                        }
                        else {
                            $.gritter.add({
                                text: "Lỗi: " + data.error,
                                class_name: 'gritter-error'
                            });
                        }

                    }
                });
                return false;
            }
        });
    }

    function saveAndClear() {
        blockUI(true);
        $('#createEditFrom').submit();

    }

    function blockUI(isMark) {
        if (isMark) {
            $(document).ajaxStart($.blockUI({ message: '<i class="fa fa-spinner fa-3x fa-lg fa-spin txt-color-blueDark"></i>', theme: false })).ajaxStop($.unblockUI);
        }
        else {
            $(document).ajaxStart($.blockUI({ message: '<i class="fa fa-spinner fa-3x fa-lg fa-spin txt-color-blueDark"></i>', theme: false, overlayCSS: { backgroundColor: 'transparent' } })).ajaxStop($.unblockUI);
        }
    }
</script>